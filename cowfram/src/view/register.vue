<template>
  <v-app>
    <v-container fluid class="pa-0 fill-height register-container">
      <v-row no-gutters class="fill-height">
        <!-- ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢: Branding & Info (Desktop Only) -->
        <v-col
          cols="12"
          md="5"
          lg="4"
          class="info-section d-none d-md-flex align-center justify-center flex-column text-white pa-12"
        >
          <div class="info-content">
            <v-btn
              icon="mdi-arrow-left"
              variant="text"
              color="white"
              class="mb-8"
              @click="goToLogin"
            ></v-btn>
            
            <v-avatar color="rgba(255,255,255,0.2)" size="100" class="mb-6">
              <v-icon size="60" color="white">mdi-account-plus</v-icon>
            </v-avatar>

            <h2 class="text-h3 font-weight-black mb-4">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</h2>
            <p class="text-body-1 mb-8 opacity-80">
              ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÇ‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
            </p>

            <v-list bg-color="transparent" theme="dark">
              <v-list-item prepend-icon="mdi-check-circle" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡πâ‡∏≥‡∏ô‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô"></v-list-item>
              <v-list-item prepend-icon="mdi-check-circle" title="‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô"></v-list-item>
              <v-list-item prepend-icon="mdi-check-circle" title="‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡πÑ‡∏£"></v-list-item>
            </v-list>
          </div>
          <div class="leaf-pattern"></div>
        </v-col>

        <!-- ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤: Register Form Section -->
        <v-col
          cols="12"
          md="7"
          lg="8"
          class="d-flex align-center justify-center bg-white"
        >
          <div class="register-wrapper pa-8 pa-sm-16">
            <div class="mb-8">
              <h2 class="text-h4 font-weight-bold color-farm mb-2">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</h2>
              <p class="text-body-1 text-medium-emphasis">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            </div>

            <v-form ref="registerForm" @submit.prevent="handleRegister">
              <v-row>
                <!-- ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• -->
                <v-col cols="12" sm="6" class="py-1">
                  <v-text-field
                    v-model="regData.firstName"
                    label="‡∏ä‡∏∑‡πà‡∏≠"
                    variant="outlined"
                    color="green-darken-2"
                    :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠']"
                  ></v-text-field>
                </v-col>
                <v-col cols="12" sm="6" class="py-1">
                  <v-text-field
                    v-model="regData.lastName"
                    label="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"
                    variant="outlined"
                    color="green-darken-2"
                    :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•']"
                  ></v-text-field>
                </v-col>

                <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≤‡∏£‡πå‡∏° -->
                <v-col cols="12" class="py-1">
                  <v-text-field
                    v-model="regData.farmName"
                    label="‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≤‡∏£‡πå‡∏° / ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"
                    variant="outlined"
                    prepend-inner-icon="mdi-home-group"
                    color="green-darken-2"
                    :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≤‡∏£‡πå‡∏°']"
                  ></v-text-field>
                </v-col>

                <!-- ‡∏≠‡∏µ‡πÄ‡∏°‡∏• -->
                <v-col cols="12" class="py-1">
                  <v-text-field
                    v-model="regData.email"
                    label="‡∏≠‡∏µ‡πÄ‡∏°‡∏•"
                    type="email"
                    variant="outlined"
                    prepend-inner-icon="mdi-email-outline"
                    color="green-darken-2"
                    :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•', v => /.+@.+\..+/.test(v) || '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á']"
                  ></v-text-field>
                </v-col>

                <!-- ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô -->
                <v-col cols="12" sm="6" class="py-1">
                  <v-text-field
                    v-model="regData.password"
                    label="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                    :type="showPass ? 'text' : 'password'"
                    variant="outlined"
                    color="green-darken-2"
                    :append-inner-icon="showPass ? 'mdi-eye-off' : 'mdi-eye'"
                    @click:append-inner="showPass = !showPass"
                    :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô', v => v.length >= 6 || '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß']"
                  ></v-text-field>
                </v-col>
                <v-col cols="12" sm="6" class="py-1">
                  <v-text-field
                    v-model="regData.confirmPassword"
                    label="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                    :type="showPass ? 'text' : 'password'"
                    variant="outlined"
                    color="green-darken-2"
                    :rules="[v => v === regData.password || '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô']"
                  ></v-text-field>
                </v-col>

                <!-- ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç -->
                <v-col cols="12" class="py-0">
                  <v-checkbox
                    v-model="regData.agree"
                    color="green-darken-2"
                    :rules="[v => !!v || '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç']"
                  >
                    <template v-slot:label>
                      <div class="text-body-2">
                        ‡∏â‡∏±‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö <a href="#" class="text-green-darken-2 font-weight-bold">‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
                      </div>
                    </template>
                  </v-checkbox>
                </v-col>
              </v-row>

              <v-btn
                block
                size="x-large"
                color="green-darken-2"
                elevation="4"
                rounded="lg"
                class="mt-4 mb-6 font-weight-bold"
                :loading="loading"
                type="submit"
              >
                ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
              </v-btn>

              <div class="text-center">
                <span class="text-body-2">‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß?</span>
                <v-btn
                  variant="text"
                  color="green-darken-2"
                  class="text-body-2 font-weight-bold px-2"
                  @click="goToLogin"
                >
                  ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
                </v-btn>
              </div>
            </v-form>
          </div>
        </v-col>
      </v-row>
    </v-container>
  </v-app>
</template>

<script setup>
import { ref, reactive } from 'vue'
import router from '../router'

const registerForm = ref(null)
const loading = ref(false)
const showPass = ref(false)

const regData = reactive({
  firstName: '',
  lastName: '',
  farmName: '',
  email: '',
  password: '',
  confirmPassword: '',
  agree: false
})

const handleRegister = async () => {
  const { valid } = await registerForm.value.validate()
  if (!valid) return

  loading.value = true

  try {
    // ==========================
    // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
    // ==========================
    await new Promise(resolve => setTimeout(resolve, 1500))

    // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ backend ‡∏™‡πà‡∏á token ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
    const fakeToken = 'farm_token_' + Date.now()

    // ‡πÄ‡∏Å‡πá‡∏ö token
    localStorage.setItem('token', fakeToken)

    alert('‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏° üêÑ')

    // ‡∏û‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ dashboard
    router.push('/admin/dashbord')
  } catch (err) {
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å')
    console.error(err)
  } finally {
    loading.value = false
  }
}

const goToLogin = () => {
  router.push('/')
}
</script>


<style scoped>
@import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap');

.register-container {
  font-family: 'Kanit', sans-serif !important;
  background-color: #ffffff;
}

/* ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢ (‡πÇ‡∏ó‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ü‡∏≤‡∏£‡πå‡∏°) */
.info-section {
  background: linear-gradient(180deg, #1b5e20 0%, #388e3c 100%);
  position: relative;
  overflow: hidden;
}

.info-content {
  position: relative;
  z-index: 2;
  text-align: center;
  max-width: 320px;
}

.leaf-pattern {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0.1;
  background-image: radial-gradient(#ffffff 1px, transparent 1px);
  background-size: 20px 20px;
}

.register-wrapper {
  width: 100%;
  max-width: 700px;
}

.color-farm {
  color: #1b5e20;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô‡∏Ç‡∏≠‡∏á Input */
:deep(.v-field--variant-outlined) {
  border-radius: 12px !important;
  background-color: #fcfdfc;
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô */
.v-btn {
  text-transform: none !important;
  letter-spacing: 0.5px;
}
</style>